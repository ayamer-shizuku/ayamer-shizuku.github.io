<!-- 极简评论区（无需 GitHub 账号） -->
<h3>评论区</h3>
<div style="border-top: 1px solid #e0e0e0; padding-top: 20px;">
    <div id="comments-list"></div>
    <div style="margin-top: 20px;">
        <input type="text" id="nickname" placeholder="你的昵称" style="padding: 8px; width: 200px; margin-right: 8px;">
        <textarea id="comment-content" placeholder="写下你的评论..." style="padding: 8px; width: 100%; height: 80px; margin: 8px 0;"></textarea>
        <button id="submit-comment" style="padding: 8px 16px; background-color: #4299e1; color: white; border: none; border-radius: 4px; cursor: pointer;">提交评论</button>
    </div>
</div>

<script>
    // 评论功能（基于本地存储，刷新页面后不丢失）
    const commentsList = document.getElementById('comments-list');
    const nicknameInput = document.getElementById('nickname');
    const commentContent = document.getElementById('comment-content');
    const submitBtn = document.getElementById('submit-comment');
    const postId = urlParams.get('id');
    const commentsKey = `comments_${postId}`;

    // 加载已有评论
    function loadComments() {
        const comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
        commentsList.innerHTML = '';
        comments.forEach(comment => {
            const commentElement = document.createElement('div');
            commentElement.style.padding = '12px';
            commentElement.style.border = '1px solid #e0e0e0';
            commentElement.style.borderRadius = '4px';
            commentElement.style.marginBottom = '8px';
            commentElement.innerHTML = `
                <strong>${comment.nickname}</strong>
                <p style="margin: 4px 0;">${comment.content}</p>
                <small style="color: #666;">${comment.time}</small>
            `;
            commentsList.appendChild(commentElement);
        });
    }

    // 提交评论
    submitBtn.addEventListener('click', () => {
        const nickname = nicknameInput.value.trim();
        const content = commentContent.value.trim();
        if (!nickname || !content) return alert('请填写昵称和评论内容！');

        const comments = JSON.parse(localStorage.getItem(commentsKey)) || [];
        comments.push({
            nickname,
            content,
            time: new Date().toLocaleString()
        });
        localStorage.setItem(commentsKey, JSON.stringify(comments));
        loadComments();
        nicknameInput.value = '';
        commentContent.value = '';
    });

    // 页面加载时显示评论
    loadComments();
</script>
